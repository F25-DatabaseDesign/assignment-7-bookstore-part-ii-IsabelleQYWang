{% extends 'base.html' %}

{% block container %}
<main>
    <section id="catLeft">
        {% for category in categories %}
            <p class='notSelectedCategory'>
                <a href='{{ url_for("category", categoryId=category.id) }}'>
                    {{ category.name }}
                </a>
            </p>
        {% endfor %}
    </section>
    <section id="catRight">
        <h2>Search Results for "{{ term }}"</h2>
        
        {% if books|length == 0 %}
            <p class="bookDetail">No results found for "{{ term }}".</p>
            <p class="bookDetail"><a href="{{ url_for('home') }}">‚Üê Back to Home</a></p>
        {% else %}
            <p class="bookDetail">Found {{ books|length }} book{{ 's' if books|length != 1 else '' }}</p>
            
            {% for book in books %}
                <div class='book'>
                    <div>
                        <img
                            src='{{ url_for("static", filename="images/books/" ~ book.image) }}'
                            alt='{{ book.title }} cover'
                        />
                    </div>
                    <div class='bookDetailBox'>
                        <p class='bookTitle'>{{ book.title }}</p>
                        <p class='bookDetail'>by {{ book.author }}</p>
                        <p class='bookDetail'>ISBN: {{ book.isbn }}</p>
                        <p class='bookPrice'>${{ '%.2f'|format(book.price) }}</p>
                        <form method="post" action="{{ url_for('add_to_cart', bookId=book.id) }}" style="display: inline;">
                            <button type="submit" class='actionButton'>Add to cart</button>
                        </form>
                        <a class='actionButton' href='{{ url_for("book_detail", book_id=book.id) }}'>View Details</a>
                        {% if book.readNow == 1 %}
                            <a class='actionButton' href='#'>Read Now</a>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% endif %}
    </section>
</main>
{% endblock %}
